<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–†—ã–Ω–æ–∫ P2P</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body class="dark-theme">
  <header class="header">
    <div class="header-left">
      <p class="user-name">üë§ –ü–∞–≤–µ–ª</p>
      <p class="user-info">‚úÖ –û—Ä–¥–µ—Ä–∞: 55</p>
      <p class="user-info">‚≠ê –†–µ–π—Ç–∏–Ω–≥: 99%</p>
      <p class="user-info">üí≥ –û–ø–ª–∞—Ç–∞: –°–±–µ—Ä–±–∞–Ω–∫</p>
    </div>
    <div class="header-right"><button class="icon-btn">üîî</button></div>
  </header>
  <div class="container">
    <h1>–†—ã–Ω–æ–∫</h1>
    <a href="/create"><button class="btn">–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</button></a>

    <div class="filters">
      <select id="f-crypto"><option value="">–ö—Ä–∏–ø—Ç–∞</option><option>USDT</option><option>BTC</option><option>ETH</option><option>TRUMP</option></select>
      <select id="f-fiat"><option value="">–§–∏–∞—Ç</option><option>USD</option><option>EUR</option><option>GBP</option><option>RUB</option><option>UAH</option><option>KZT</option><option>TRY</option><option>AED</option><option>NGN</option><option>INR</option><option>VND</option><option>BRL</option><option>ARS</option><option>COP</option><option>PEN</option><option>MXN</option><option>CLP</option><option>ZAR</option><option>EGP</option><option>GHS</option><option>KES</option><option>MAD</option><option>PKR</option><option>BDT</option><option>LKR</option><option>IDR</option><option>THB</option><option>MYR</option><option>PHP</option><option>KRW</option><option>TJS</option></select>
      <select id="f-payment"><option value="">–û–ø–ª–∞—Ç–∞</option><option>–°–±–µ—Ä–±–∞–Ω–∫</option><option>–¢–∏–Ω—å–∫–æ—Ñ—Ñ</option><option>PayPal</option><option>QIWI</option><option>–Ø–Ω–¥–µ–∫—Å</option><option>–ë–∞–Ω–∫</option></select>
      <button class="btn" onclick="filterAds()">–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å</button>
    </div>

    <ul id="ads-list">
      {% for ad in ads %}
      <li class="ad-card" data-crypto="{{ad.crypto}}" data-fiat="{{ad.fiat}}" data-payment="{{ad.payment_method}}">
        <div class="ad-main">
          <p><strong>{{ad.action|capitalize}}</strong> {{ad.amount}} {{ad.crypto}} ‚Üí {{ad.fiat}} –ø–æ {{ad.rate}}</p>
          <p>–û–ø–ª–∞—Ç–∞: {{ad.payment_method}}</p>
        </div>
        <div class="ad-footer">
          <button class="settings-btn" onclick="openSettings('{{ad.id}}')">‚öôÔ∏è</button>
          <div id="settings-{{ad.id}}" class="settings-modal">
            <p>–ü—Ä–æ–¥–∞–≤–µ—Ü: {{ad.user}}</p>
            <p>–†–µ–π—Ç–∏–Ω–≥: {{ad.rating}}%</p>
            <p>–û—Ä–¥–µ—Ä–∞: {{ad.orders}}</p>
            <button onclick="closeSettings('{{ad.id}}')">–ó–∞–∫—Ä—ã—Ç—å</button>
          </div>
          <a href="/trade/{{ad.id}}"><button class="btn">–ö—É–ø–∏—Ç—å</button></a>
        </div>
      </li>
      {% else %}
      <li>–û–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–µ—Ç</li>
      {% endfor %}
    </ul>
  </div>
  <script>
    function filterAds(){
      const c=document.getElementById('f-crypto').value;
      const f=document.getElementById('f-fiat').value;
      const p=document.getElementById('f-payment').value;
      document.querySelectorAll('.ad-card').forEach(el=>{
        const ok=(!c||el.dataset.crypto===c)&&(!f||el.dataset.fiat===f)&&(!p||el.dataset.payment===p);
        el.style.display= ok?'':'none';
      });
    }
    function openSettings(id){document.getElementById('settings-'+id).style.display='block';}
    function closeSettings(id){document.getElementById('settings-'+id).style.display='none';}
  </script>
</body>
</html>
