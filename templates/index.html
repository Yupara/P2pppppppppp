<!DOCTYPE html>
<html>
<head>
    <title>P2P Exchange</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>Welcome to P2P Exchange</h1>
    <p>Explore active offers and stats without logging in!</p>

    <h2>Active Offers</h2>
    <div id="offers"></div>

    <h2>Admin Stats</h2>
    <div id="stats"></div>

    <script>
        // Загрузка активных офферов
        fetch('/offers')
            .then(response => response.json())
            .then(data => {
                const offersDiv = document.getElementById('offers');
                if (data.length > 0) {
                    data.forEach(offer => {
                        offersDiv.innerHTML += `<p>Offer #${offer.id}: ${offer.amount} ${offer.currency} (${offer.fiat_amount} ${offer.fiat})</p>`;
                    });
                } else {
                    offersDiv.innerHTML = '<p>No active offers found.</p>';
                }
            })
            .catch(error => console.error('Error loading offers:', error));

        // Загрузка статистики
        fetch('/admin-stats')
            .then(response => response.json())
            .then(data => {
                const statsDiv = document.getElementById('stats');
                statsDiv.innerHTML = `
                    <p>Earnings Today: ${data.earnings_today} USDT</p>
                    <p>Total Earnings: ${data.earnings_total} USDT</p>
                    <p>Available Earnings: ${data.available_earnings} USDT</p>
                    <p>Active Users: ${data.active_users.length}</p>
                `;
            })
            .catch(error => console.error('Error loading stats:', error));
    </script>
</body>
</html>
