<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Создать объявление</title>
  <style>
    body { background-color: #002b26; color: white; font-family: Arial; padding: 20px; }
    h1 { color: #90EE90; }
    input, select { padding: 8px; margin: 5px 0; width: 100%; }
    button { padding: 10px; margin-top: 10px; background: #00aa88; color: white; border: none; }
  </style>
</head>
<body>
  <h1>Создание объявления</h1>
  <form id="adForm">
    <label>Тип:
      <select name="type" required>
        <option value="buy">Купить</option>
        <option value="sell">Продать</option>
      </select>
    </label>
    <label>Цена: <input type="number" step="0.01" name="price" required></label>
    <label>Сумма (USDT): <input type="number" step="0.01" name="amount" required></label>
    <label>Валюта:
      <select name="currency" required>
        <option value="RUB">RUB</option>
        <option value="USD">USD</option>
      </select>
    </label>
    <button type="submit">Создать</button>
  </form>

  <script>
    document.getElementById('adForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      const formData = new FormData(this);
      const data = {};
      formData.forEach((val, key) => data[key] = val);

      const res = await fetch('/api/ads/create', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Bearer ' + localStorage.getItem('token')  // если у тебя токен есть
        },
        body: JSON.stringify(data)
      });

      if (res.ok) {
        alert('Объявление создано!');
        window.location.href = '/';
      } else {
        const err = await res.json();
        alert('Ошибка: ' + err.detail);
      }
    });
  </script>
</body>
</html>
